var homeIndexConfig=window.__HOME_INDEX_CONFIG||{};!function(){var e=document.getElementById("currentDate"),t=document.getElementById("currentTime");if(e&&t){var n=new Intl.DateTimeFormat("id-ID",{weekday:"long",day:"2-digit",month:"long",year:"numeric"}),a=new Intl.DateTimeFormat("id-ID",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),i=function(){var i=new Date;e.textContent=n.format(i),t.textContent=a.format(i)+" WIB"};i(),window.setInterval(i,1e3)}}(),function(){var e=document.body,t=document.getElementById("openMobileNav"),n=document.getElementById("closeMobileNav"),a=document.getElementById("mobileNav"),i=document.getElementById("mobileNavBackdrop"),r=document.getElementById("helpMenu"),o=document.getElementById("helpToggle"),l=document.getElementById("mobileHelpToggle"),u=document.getElementById("mobileHelpList"),d=function(n){if(e&&a&&t){if(n)return e.classList.add("nav-open"),a.setAttribute("aria-hidden","false"),void t.setAttribute("aria-expanded","true");e.classList.remove("nav-open"),a.setAttribute("aria-hidden","true"),t.setAttribute("aria-expanded","false")}};if(t&&n&&a&&i){t.addEventListener("click",function(){d(!0)}),n.addEventListener("click",function(){d(!1)}),i.addEventListener("click",function(){d(!1)});for(var s=a.querySelectorAll("a.mobile-link, .mobile-help-list a, a.mobile-member-area, a.mobile-logout"),c=0;c<s.length;c+=1)s[c].addEventListener("click",function(){d(!1)});window.addEventListener("resize",function(){window.innerWidth>=992&&d(!1)})}r&&o&&(o.addEventListener("click",function(e){e.preventDefault();var t=r.classList.toggle("open");o.setAttribute("aria-expanded",t?"true":"false")}),document.addEventListener("click",function(e){r.contains(e.target)||(r.classList.remove("open"),o.setAttribute("aria-expanded","false"))})),l&&u&&l.addEventListener("click",function(){var e=u.classList.toggle("is-open"),t=l.querySelector("span");l.setAttribute("aria-expanded",e?"true":"false"),t&&(t.textContent=e?"-":"+")}),document.addEventListener("keydown",function(e){"Escape"===e.key&&(d(!1),r&&o&&(r.classList.remove("open"),o.setAttribute("aria-expanded","false")))})}(),function(){for(var e=[{bodyId:"employeeCreateModalBody",cardIds:["createEmployeeSourceCard"]},{bodyId:"employeeManageModalBody",cardIds:["employeeDeleteSourceCard","employeeEditSourceCard"]},{bodyId:"privilegedManageModalBody",cardIds:["privilegedPasswordSourceCard","privilegedFeatureSourceCard","privilegedCreateSourceCard"]}],t=0;t<e.length;t+=1){var n=e[t],a=document.getElementById(n.bodyId);if(a&&n.cardIds&&n.cardIds.length)for(var i=0;i<n.cardIds.length;i+=1){var r=document.getElementById(n.cardIds[i]);r&&(r.classList.add("manage-modal-section"),a.appendChild(r))}}var o=document.getElementById("manageAccountSourceWrap");o&&o.setAttribute("aria-hidden","true");var l=document.querySelectorAll("[data-manage-modal-open]"),u=document.querySelectorAll("[data-manage-modal]");if(l.length&&u.length){for(var d=null,s=null,c=function(e){e&&(e.classList.remove("show"),e.setAttribute("aria-hidden","true"),d===e&&(d=null,document.body.classList.remove("manage-modal-open"),s&&"function"==typeof s.focus&&s.focus(),s=null))},m=function(e,t){if(e){d&&d!==e&&c(d),s=t||null,d=e,e.classList.add("show"),e.setAttribute("aria-hidden","false"),document.body.classList.add("manage-modal-open");var n=e.querySelector("input, select, textarea, button");n&&"function"==typeof n.focus&&window.setTimeout(function(){n.focus()},0)}},g=0;g<l.length;g+=1)l[g].addEventListener("click",function(e){e.preventDefault();var t=String(this.getAttribute("data-manage-modal-open")||"").trim();""!==t&&m(document.getElementById(t),this)});for(var f=document.querySelectorAll("[data-manage-modal-close]"),v=0;v<f.length;v+=1)f[v].addEventListener("click",function(){c(this.closest("[data-manage-modal]"))});for(var p=0;p<u.length;p+=1)u[p].addEventListener("click",function(e){e.target===this&&c(this)});document.addEventListener("keydown",function(e){"Escape"===e.key&&d&&c(d)})}}(),function(){var e=document.getElementById("deleteEmployeeForm"),t=document.getElementById("deleteUsernameInput"),n=document.getElementById("editEmployeeForm"),a=document.getElementById("newUsernameInput"),i=document.getElementById("privilegedNewUsernameInput"),r=document.getElementById("editUsernameInput"),o=document.getElementById("editNewUsernameInput"),l=document.getElementById("editDisplayNameInput"),u=document.getElementById("editPasswordInput"),d=document.getElementById("editPhoneInput"),s=document.getElementById("editBranchInput"),c=document.getElementById("editShiftInput"),m=document.getElementById("editSalaryMonthlyInput"),g=document.getElementById("editJobTitleInput"),f=document.getElementById("editWeeklyDayOffInput"),v=document.getElementById("editAddressInput"),p=Array.isArray(homeIndexConfig.accountRows)?homeIndexConfig.accountRows:[],h=String(homeIndexConfig.defaultJobTitle||""),y=String(homeIndexConfig.defaultBranch||""),b=parseInt(homeIndexConfig.defaultWeeklyDayOff,10),w=isFinite(b)&&b>=1&&b<=7?b:1,E={},I=[];if(Array.isArray(p))for(var C=0;C<p.length;C+=1){var L=p[C]||{},S=String(L.username||"").trim().toLowerCase();""!==S&&(E[S]=L,I.push(L))}var k=function(e){return String(e||"").trim().toLowerCase()},x=function(e,t){var n=k(e);if(""===n)return null;if(E[n])return E[n];for(var a=[],i=0;i<I.length;i+=1){var r=I[i]||{},o=k(r.username||""),l=k(r.employee_id||""),u=""!==l&&"-"!==l?l+" - "+o:o;if(n===l||n===u)return r;t&&((-1!==o.indexOf(n)||""!==l&&"-"!==l&&-1!==l.indexOf(n)||-1!==u.indexOf(n))&&a.push(r))}return t&&1===a.length?a[0]:null};if(e&&t&&e.addEventListener("submit",function(e){var n=String(t.value||"").trim();if(""!==n){var a=x(n,!0);if(!a)return e.preventDefault(),window.alert("Akun karyawan tidak ditemukan. Ketik username atau ID yang valid."),void t.focus();var i=String(a.username||"").trim();if(""===i)return e.preventDefault(),window.alert("Akun karyawan tidak ditemukan. Coba pilih ulang dari hasil pencarian."),void t.focus();t.value=i,window.confirm('Hapus akun "'+i+'"? Data absensi, cuti/izin, pinjaman, dan lembur akun ini juga akan dihapus.')||e.preventDefault()}}),n&&r&&o&&l&&u&&d&&s&&c&&m&&g&&f&&v){var B=function(e){var t=String(e||"").toLowerCase();return(t=(t=t.replace(/[^a-z0-9_]+/g,"_")).replace(/_+/g,"_").replace(/^_+|_+$/g,"")).length>30&&(t=t.substring(0,30).replace(/_+$/g,"")),t};a&&a.addEventListener("input",function(){a.value=B(a.value)}),i&&i.addEventListener("input",function(){i.value=B(i.value)}),o&&o.addEventListener("input",function(){o.value=B(o.value)});var A=function(e){var t,n,a=k(e),i=""!==a&&E[a]?E[a]:null;if(!i)return o.value="",l.value="",u.value="",d.value="",s.value=y,c.value="pagi",m.value="",g.value=h,f.value=String(w),void(v.value="");o.value=String(i.username||""),l.value=String(i.display_name||i.username||""),u.value="",d.value=String(i.phone||""),s.value=String(i.branch||y||""),c.value="siang"===String(i.shift_key||"pagi").toLowerCase()?"siang":"pagi",m.value=String(i.salary_monthly||""),g.value=String(i.job_title||""),""===String(g.value||"").trim()&&(g.value=h),f.value=String((t=i.weekly_day_off,n=parseInt(t,10),!isFinite(n)||n<1||n>7?w:n)),v.value=String(i.address||"")},M=function(e,t,n){var a=!1!==n,i=String(r.value||"").trim();if(""===i)return a&&A(""),"function"==typeof r.setCustomValidity&&r.setCustomValidity(""),!1;var o=x(i,e);if(!o||""===String(o.username||"").trim())return a&&A(""),"function"==typeof r.setCustomValidity&&r.setCustomValidity("Akun karyawan tidak ditemukan."),!1;var l=String(o.username||"").trim();return t&&(r.value=l),"function"==typeof r.setCustomValidity&&r.setCustomValidity(""),a&&A(l),!0};r.addEventListener("input",function(){if(""===String(r.value||"").trim())return A(""),void("function"==typeof r.setCustomValidity&&r.setCustomValidity(""));M(!1,!1)}),r.addEventListener("change",function(){M(!0,!0)}),n.addEventListener("submit",function(e){M(!0,!0,!1)||(e.preventDefault(),window.alert("Akun karyawan tidak ditemukan. Ketik username atau ID yang valid."),r.focus())}),""!==String(r.value||"").trim()&&M(!0,!0)}}(),function(){var e=document.getElementById("employeeAccountTableBody"),t=document.getElementById("employeeAccountPaginationWrap"),n=document.getElementById("employeeAccountSearchInput");if(e&&t){var a=Array.prototype.slice.call(e.querySelectorAll("tr.employee-account-row"));if(a.length){for(var i=0;i<a.length;i+=1){var r=a[i].cells||[],o=r.length>0?String(r[0].textContent||""):"",l=r.length>1?String(r[1].textContent||""):"";a[i].setAttribute("data-search-key",(o+" "+l).toLowerCase())}var u=10,d=a.slice(),s=d.length,c=Math.ceil(s/u),m=1,g=null,f=function(){g&&g.parentNode&&g.parentNode.removeChild(g),g=null;for(var t=0;t<a.length;t+=1)a[t].style.display="none";if(d.length)for(var i=(m-1)*u,r=i+u,o=0;o<d.length;o+=1)d[o].style.display=o>=i&&o<r?"":"none";else!function(t){if(!g){(g=document.createElement("tr")).className="employee-account-empty";var n=document.createElement("td");n.colSpan=7,n.className="text-center py-4 text-secondary",g.appendChild(n)}var a="Tidak ada karyawan yang cocok.";""!==String(t||"").trim()&&(a='Tidak ada karyawan untuk pencarian "'+String(t).trim()+'".'),g.children[0].textContent=a,e.appendChild(g)}(n?String(n.value||""):"")},v=function(e,t,n){var a=document.createElement("button");return a.type="button",a.className="account-page-btn"+(n?" active":""),a.textContent=String(e),a.setAttribute("aria-label","Halaman "+String(e)),a.addEventListener("click",function(){t!==m&&(m=t,f(),p())}),a},p=function(){if(t.innerHTML="",s<=0)t.style.display="none";else{if(c<=1){t.style.display="flex";var e=document.createElement("span");return e.className="account-pagination-info",e.textContent="Menampilkan 1 - "+s+" dari "+s+" karyawan",void t.appendChild(e)}if(t.style.display="flex",m>1){var n=document.createElement("button");n.type="button",n.className="account-page-btn",n.textContent="Sebelumnya",n.setAttribute("aria-label","Halaman sebelumnya"),n.addEventListener("click",function(){m<=1||(m-=1,f(),p())}),t.appendChild(n)}for(var a=function(e,t){if(t<=5){for(var n=[],a=1;a<=t;a+=1)n.push(a);return n}return e<=2?[1,2,3,"...",t]:e>=t-1?[1,"...",t-2,t-1,t]:[1,"...",e-1,e,e+1,"...",t]}(m,c),i=0;i<a.length;i+=1)if("..."!==a[i])t.appendChild(v(a[i],a[i],a[i]===m));else{var r=document.createElement("span");r.className="account-page-ellipsis",r.textContent="...",t.appendChild(r)}if(m<c){var o=document.createElement("button");o.type="button",o.className="account-page-btn",o.textContent="Selanjutnya",o.setAttribute("aria-label","Halaman selanjutnya"),o.addEventListener("click",function(){m>=c||(m+=1,f(),p())}),t.appendChild(o)}var l=(m-1)*u+1,d=Math.min(m*u,s),g=document.createElement("span");g.className="account-pagination-info",g.textContent="Menampilkan "+l+" - "+d+" dari "+s+" karyawan",t.appendChild(g)}},h=function(){var e=n?String(n.value||"").trim().toLowerCase():"";d=[];for(var t=0;t<a.length;t+=1){var i=String(a[t].getAttribute("data-search-key")||"").toLowerCase();""!==e&&-1===i.indexOf(e)||d.push(a[t])}s=d.length,c=Math.ceil(s/u),m=1,f(),p()};n&&n.addEventListener("input",h),h()}else t.style.display="none"}}(),function(){var e=document.getElementById("editFeatureAdminForm"),t=document.getElementById("featureTargetAccountInput");if(e&&t){var n=Array.isArray(homeIndexConfig.featureAccounts)?homeIndexConfig.featureAccounts:[];if(Array.isArray(n)&&n.length){for(var a={},i=0;i<n.length;i+=1){var r=n[i]||{},o=String(r.username||"").trim().toLowerCase();if(""!==o){for(var l=Array.isArray(r.feature_permissions)?r.feature_permissions:[],u=[],d=0;d<l.length;d+=1){var s=String(l[d]||"").trim().toLowerCase();""!==s&&(-1===u.indexOf(s)&&u.push(s))}a[o]=u}}var c=e.querySelectorAll("input[data-feature-permission-checkbox]"),m=function(){for(var e=String(t.value||"").trim().toLowerCase(),n=a[e]||[],i=0;i<c.length;i+=1){var r=c[i],o=String(r.value||"").trim().toLowerCase();r.checked=-1!==n.indexOf(o)}};t.addEventListener("change",m),m()}}}(),function(){var e=document.querySelectorAll(".table-wrap");if(e.length)for(var t='a, button, input, select, textarea, label, [role="button"]',n=0;n<e.length;n+=1)(function(e){var n=!1,a=!1,i=0,r=0,o=0,l=function(t){if(n){var o=t.clientX-i;!a&&Math.abs(o)>=6&&(a=!0),a&&(e.scrollLeft=r-o,t.preventDefault())}},u=function(){n&&(n=!1,window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",u),e.classList.remove("is-dragging"),a&&(o=Date.now()),a=!1)};e.addEventListener("mousedown",function(o){0===o.button&&(e.scrollWidth<=e.clientWidth||o.target.closest(t)||(n=!0,a=!1,i=o.clientX,r=e.scrollLeft,e.classList.add("is-dragging"),window.addEventListener("mousemove",l),window.addEventListener("mouseup",u),o.preventDefault()))}),e.addEventListener("mouseleave",u),e.addEventListener("click",function(e){Date.now()-o>220||e.target.closest(t)&&(e.preventDefault(),e.stopPropagation())},!0)})(e[n])}(),function(){var e=String(homeIndexConfig.summaryUrl||""),t=String(homeIndexConfig.statusLabelFixed||""),n=document.getElementById("summaryStatusPill"),a=document.getElementById("summaryCheckInTime"),i=document.getElementById("summaryCheckOutTime"),r=document.getElementById("summaryTotalHadir"),o=document.getElementById("summaryTotalTerlambat"),l=document.getElementById("summaryTotalIzin"),u=document.getElementById("summaryTotalAlpha");if(e&&r&&o&&l&&u){var d=function(e){var t=Number(e);return isFinite(t)?Math.max(0,Math.floor(t)):0},s=function(e){if(e&&"object"==typeof e){if(n){var s=String(t||"Ringkasan Operasional Harian");n.textContent=s,function(e){if(n){var t=String(e||"").toLowerCase();n.classList.remove("status-default","status-success","status-warning","status-info"),-1===t.indexOf("hadir")&&-1===t.indexOf("check in")?-1===t.indexOf("terlambat")?-1===t.indexOf("izin")&&-1===t.indexOf("cuti")&&-1===t.indexOf("ringkasan")&&-1===t.indexOf("monitoring")&&-1===t.indexOf("operasional")?n.classList.add("status-default"):n.classList.add("status-info"):n.classList.add("status-warning"):n.classList.add("status-success")}}(s)}a&&(a.textContent=String(e.jam_masuk||"-")),i&&(i.textContent=String(e.jam_pulang||"-")),r.textContent=String(d(e.total_hadir_bulan_ini)),o.textContent=String(d(e.total_terlambat_bulan_ini)),l.textContent=String(d(e.total_izin_bulan_ini)),u.textContent=String(d(e.total_alpha_bulan_ini))}},c=!1,m=function(){c||(c=!0,fetch(e+"?_="+Date.now(),{credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(e){if(!e.ok)throw new Error("HTTP "+e.status);return e.json()}).then(function(e){e&&!0===e.success&&s(e.summary||{})}).catch(function(){}).then(function(){c=!1}))};m(),window.setInterval(m,3e4)}}(),function(){var e=document.querySelectorAll("[data-metric-card]"),t=document.getElementById("metricModal"),n=document.getElementById("metricModalClose"),a=document.getElementById("metricModalTitle"),i=document.getElementById("metricModalSubtitle"),r=document.getElementById("metricChartLegend"),o=document.getElementById("metricChartCanvas"),l=document.querySelectorAll(".metric-range-btn[data-metric-range]"),u=String(homeIndexConfig.chartEndpoint||"");if(t&&o&&e.length){for(var d={hadir:"Total Hadir",terlambat:"Total Terlambat",izin_cuti:"Total Izin/Cuti",alpha:"Total Alpha"},s={"1H":"1 Hari","1M":"1 Minggu","1B":"1 Bulan","1T":"1 Tahun",ALL:"Semuanya"},c=null,m=null,g=null,f="hadir",v="1B",p=null,h=null,y=[],b=[],w={},E=null,I=function(e){var t=Number(e);return isFinite(t)||(t=0),new Intl.NumberFormat("id-ID").format(Math.round(t))},C=function(e){v=String(e||"1B").toUpperCase();for(var t=0;t<l.length;t+=1){var n=l[t];n.classList.toggle("active",String(n.getAttribute("data-metric-range")||"").toUpperCase()===v)}},L=function(e){r&&(r.innerHTML='<span class="label">'+String(e||"Memuat data grafik...")+"</span>")},S=function(e,t,n){var a=Number(e&&e.open?e.open:0),i=Number(e&&e.high?e.high:0),r=Number(e&&e.low?e.low:0),o=Number(e&&e.close?e.close:0),l=isFinite(t)?Number(t):a,u=o-l,d=l>0?u/l*100:0,s=u>0?"value-up":u<0?"value-down":"",c=u>0?"+":"",m=c+I(u),g=c+d.toFixed(2).replace(".",",")+"%";return'<span class="label">'+(n||"-")+"</span><span>O "+I(a)+"</span><span>H "+I(i)+"</span><span>L "+I(r)+"</span><span>C "+I(o)+'</span><span class="'+s+'">'+m+" ("+g+")</span>"},k=function(e){var t=new Date(String(e||""));return isFinite(t.getTime())?Math.floor(t.getTime()/1e3):null},x=function(){if(o)for(var e=o.querySelectorAll(['a[href*="tradingview"]','a[href*="tradingview.com"]',".tv-lightweight-charts-attribution-logo",'[class*="attribution"]','[id*="tradingview"]'].join(",")),t=0;t<e.length;t+=1)e[t].style.display="none",e[t].style.opacity="0",e[t].style.visibility="hidden",e[t].style.pointerEvents="none"},B=function(){return!!c||(window.LightweightCharts&&"function"==typeof window.LightweightCharts.createChart?(c=window.LightweightCharts.createChart(o,{width:o.clientWidth||960,height:o.clientHeight||420,layout:{background:{color:"#f9fcff"},textColor:"#4a627b",fontFamily:"'Plus Jakarta Sans', sans-serif",attributionLogo:!1},grid:{vertLines:{color:"#e8f1fa"},horzLines:{color:"#e8f1fa"}},crosshair:{mode:window.LightweightCharts.CrosshairMode.Normal,vertLine:{color:"rgba(20, 79, 134, 0.45)",width:1,style:2,labelBackgroundColor:"#0f5c93"},horzLine:{color:"rgba(20, 79, 134, 0.35)",width:1,style:2,labelBackgroundColor:"#0f5c93"}},rightPriceScale:{borderColor:"#c6d8ea"},timeScale:{borderColor:"#c6d8ea",timeVisible:!0,secondsVisible:!1,rightOffset:2},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{mouseWheel:!0,pinch:!0,axisPressedMouseMove:!0}}),o&&"undefined"!=typeof MutationObserver&&(E||(E=new MutationObserver(function(){x()})).observe(o,{childList:!0,subtree:!0})),x(),m=c.addCandlestickSeries({upColor:"#11a069",downColor:"#e03b50",borderVisible:!1,wickUpColor:"#11a069",wickDownColor:"#e03b50",priceLineVisible:!0,lastValueVisible:!0}),(g=c.addHistogramSeries({color:"rgba(50, 112, 172, 0.28)",priceFormat:{type:"volume"},priceScaleId:""})).priceScale().applyOptions({scaleMargins:{top:.78,bottom:0}}),c.subscribeCrosshairMove(function(e){if(r&&y.length){var t=e&&e.seriesData?e.seriesData:null,n=null;t&&t.get&&(n=t.get(m)||null),n||(n=y[y.length-1]);for(var a=n&&n.time?String(n.time):"",i=a&&w[a]?w[a]:b.length?String(b[b.length-1].label||"-"):"-",o=-1,l=0;l<y.length;l+=1)if(String(y[l].time)===a){o=l;break}var u=Number(o>0?y[o-1].close||0:n.open||0);r.innerHTML=S(n,u,i)}}),window.addEventListener("resize",function(){c&&o&&(window.clearTimeout(h),h=window.setTimeout(function(){c.applyOptions({width:o.clientWidth||960,height:o.clientHeight||420})},80))}),!0):(L("Library chart gagal dimuat. Coba refresh halaman."),!1))},A=function(){if(B()){a&&(a.textContent="Grafik "+(d[f]||"Ringkasan")),L("Memuat grafik realtime...");var e=u+"?metric="+encodeURIComponent(f)+"&range="+encodeURIComponent(v)+"&_="+Date.now();fetch(e,{credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(e){if(!e.ok)throw new Error("HTTP "+e.status);return e.json()}).then(function(e){if(!e||!0!==e.success||!Array.isArray(e.points))throw new Error(e&&e.message?e.message:"Data grafik kosong.");var t=function(e){var t=[],n=[];w={};for(var a=0;a<e.length;a+=1){var i=e[a]||{},r=Number(i.value||0);isFinite(r)||(r=0);var o=a>0?Number(e[a-1].value||0):r;isFinite(o)||(o=r);var l=o,u=r,d=Math.max(l,u),s=Math.min(l,u),c=k(i.ts);null!==c&&(t.push({time:c,open:l,high:d,low:s,close:u}),n.push({time:c,value:Math.max(0,Math.round(10*Math.abs(u-l))),color:u>=l?"rgba(18, 160, 102, 0.32)":"rgba(225, 66, 82, 0.32)"}),w[String(c)]=String(i.label||""))}return{candles:t,volumes:n}}(e.points);if(y=t.candles,b=e.points.slice(),m.setData(t.candles),g.setData(t.volumes),c.timeScale().fitContent(),function(e){if(i){var t=e&&e.range_label?String(e.range_label):s[v]||v,n=e&&void 0!==e.last_value?Number(e.last_value||0):0,a=e&&void 0!==e.change_value?Number(e.change_value||0):0,r=a>0?"Naik":a<0?"Turun":"Stabil";i.textContent=t+" | Nilai sekarang: "+I(n)+" | "+r,i.style.color=a>0?"#84ffc8":a<0?"#ffc2cb":"#e2eefb"}}(e),t.candles.length){var n=t.candles.length-1,a=t.candles[n],o=Number(n>0?t.candles[n-1].close||0:a.open||0),l=e.points[n]&&e.points[n].label?String(e.points[n].label):"-";r.innerHTML=S(a,o,l)}else L("Belum ada data untuk rentang ini.")}).catch(function(e){L("Gagal memuat grafik: "+String(e&&e.message?e.message:"Unknown error"))})}},M=function(){null!==p&&(window.clearInterval(p),p=null)},_=function(e){var n=String(e||"").toLowerCase();"izin"===n&&(n="izin_cuti"),d[n]||(n="hadir"),f=n,C(v),t.classList.add("show"),t.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden",A(),M(),p=window.setInterval(function(){t.classList.contains("show")?A():M()},2e4)},T=function(){t.classList.remove("show"),t.setAttribute("aria-hidden","true"),document.body.style.overflow="",M()},D=0;D<e.length;D+=1)(function(e){var t=String(e.getAttribute("data-metric-card")||"");e.addEventListener("click",function(){_(t)}),e.addEventListener("keydown",function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),_(t))})})(e[D]);for(var N=0;N<l.length;N+=1)l[N].addEventListener("click",function(){C(this.getAttribute("data-metric-range")),A()});n&&n.addEventListener("click",T),t.addEventListener("click",function(e){e.target===t&&T()}),document.addEventListener("keydown",function(e){"Escape"===e.key&&t.classList.contains("show")&&T()})}}();